import{a as S,c as Y}from"./chunk-XOH3FMNG.js";import{a as W}from"./chunk-UT3XKRPR.js";import"./chunk-L6WIEPRT.js";import{a as u}from"./chunk-XYMJPSQV.js";import{d as X}from"./chunk-6L5DBB62.js";import{a as x}from"./chunk-A7GTJATQ.js";import{f as b,g as K,i as w,j as Q}from"./chunk-PK7LRR4S.js";import{Ba as k,Ca as o,L as y,Oa as U,Sa as R,Ua as T,Ub as _,Wa as q,Xa as G,Y as d,Ya as a,Za as c,_ as A,_a as m,ab as D,fa as C,fb as p,ga as f,gb as s,ka as v,lb as N,ma as $,mb as g,nb as J,pa as B,q as j,ra as H,tb as h,za as z}from"./chunk-25PO6U34.js";import"./chunk-3HT42XJM.js";var I=class i{constructor(e,t,n,r){this.chatsService=e;this.destroyRef=t;this.router=n;this.activatedRoute=r;this.onChatCreated=B()}onNewChatClick(){this.chatsService.create(`Chat #${this.chatsService.chats().length+1}`).pipe(y(e=>this.chatsService.loadAll().pipe(j(()=>e))),u(this.destroyRef)).subscribe(e=>{this.router.navigate([e.id],{relativeTo:this.activatedRoute})})}static{this.\u0275fac=function(t){return new(t||i)(o(S),o(v),o(w),o(b))}}static{this.\u0275cmp=d({type:i,selectors:[["app-create-chat"]],outputs:{onChatCreated:"onChatCreated"},standalone:!0,features:[h],decls:4,vars:0,consts:[["customClass","button--small",3,"click"],["ngSrc","icons/plus.svg","width","24","height","24","alt","plus"]],template:function(t,n){t&1&&(a(0,"app-button",0),p("click",function(){return n.onNewChatClick()}),m(1,"img",1),a(2,"span"),g(3,"New chat"),c()())},dependencies:[x,_,X],changeDetection:0})}};var E=class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=d({type:i,selectors:[["app-chat-navigation"]],standalone:!0,features:[h],decls:4,vars:0,consts:[["routerLink","/","customClass","button--transparent",1,"mt-auto"],["ngSrc","icons/logout.svg","width","24","height","24","alt","logout"]],template:function(t,n){t&1&&(a(0,"app-button",0),m(1,"img",1),a(2,"span"),g(3,"Log out"),c()())},dependencies:[x,_,Q],changeDetection:0})}};var M=class i{constructor(e){this.elementRef=e;this.clickOutside=new $}onClick(e){this.elementRef.nativeElement.contains(e)||this.clickOutside.emit()}static{this.\u0275fac=function(t){return new(t||i)(o(H))}}static{this.\u0275dir=A({type:i,selectors:[["","clickOutside",""]],hostBindings:function(t,n){t&1&&p("click",function(l){return n.onClick(l.target)},!1,z)},outputs:{clickOutside:"clickOutside"},standalone:!0})}};var et=(i,e)=>e.id;function it(i,e){if(i&1&&(a(0,"span"),g(1),c()),i&2){let t=s().$implicit;k(),J(t.name)}}function nt(i,e){if(i&1){let t=D();a(0,"input",6,0),p("clickOutside",function(){C(t);let r=N(1),l=s().$implicit,L=s();return f(L.onChatEdit(l,r.value))})("keyup.enter",function(){C(t);let r=N(1),l=s().$implicit,L=s();return f(L.onChatEdit(l,r.value))}),c()}if(i&2){let t=s().$implicit;R("value",t.name)}}function ot(i,e){if(i&1){let t=D();a(0,"div",5)(1,"img",7),p("click",function(){C(t);let r=s().$implicit;return f(r.editing=!0)}),c(),a(2,"img",8),p("click",function(){C(t);let r=s().$implicit,l=s();return f(l.onChatDeleteClick(r.id))}),c()()}i&2&&R("@fadeOnEnter",void 0)}function at(i,e){if(i&1){let t=D();a(0,"app-button",2),p("click",function(){let r=C(t).$implicit,l=s();return f(l.onChatClick(r.id))}),m(1,"img",3),U(2,it,2,1,"span")(3,nt,2,1,"input",4)(4,ot,3,1,"div",5),c()}if(i&2){let t=e.$implicit,n=s();R("customClass","button--transparent "+(t.id===n.activeChatId()?"button--selected":"")),k(2),T(t.editing?3:2),k(2),T(t.id===n.activeChatId()&&!t.editing?4:-1)}}var F=class i{constructor(e,t,n,r,l){this.router=e;this.activatedRoute=t;this.chatsService=n;this.chatService=r;this.destroyRef=l;this.chats=this.chatsService.chats;this.activeChatId=this.chatService.activeChatId}onChatClick(e){this.router.navigate([e],{relativeTo:this.activatedRoute})}onChatDeleteClick(e){this.chatsService.delete(e).pipe(y(()=>this.chatsService.loadAll()),u(this.destroyRef)).subscribe(t=>{let n=t.at(-1);this.router.navigate(n?["chats",n.id]:["chats"],{})})}onChatEdit(e,t){if(e.name===t){e.editing=!1;return}this.chatsService.update(e.id,t).pipe(y(()=>this.chatsService.loadAll()),u(this.destroyRef)).subscribe()}static{this.\u0275fac=function(t){return new(t||i)(o(w),o(b),o(S),o(Y),o(v))}}static{this.\u0275cmp=d({type:i,selectors:[["app-chat-list"]],standalone:!0,features:[h],decls:2,vars:0,consts:[["input",""],[3,"customClass"],[3,"click","customClass"],["ngSrc","icons/message-plus.svg","width","24","height","24","alt","message-plus"],[1,"bg-grey","bg-opacity-0","w-full","outline-0",3,"value"],[1,"flex","ml-auto","cursor-pointer"],[1,"bg-grey","bg-opacity-0","w-full","outline-0",3,"clickOutside","keyup.enter","value"],["ngSrc","icons/pencil.svg","width","24","height","24","alt","pencil",3,"click"],["ngSrc","icons/trash.svg","width","24","height","24","alt","trash",3,"click"]],template:function(t,n){t&1&&q(0,at,5,3,"app-button",1,et),t&2&&G(n.chats())},dependencies:[_,x,M],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:4px;overflow:auto}span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;max-width:60%}"],data:{animation:[W(250)]},changeDetection:0})}};var V=class i{constructor(e,t){this.chatService=e;this.destroyRef=t;this.chatService.loadAll().pipe(u(this.destroyRef)).subscribe()}static{this.\u0275fac=function(t){return new(t||i)(o(S),o(v))}}static{this.\u0275cmp=d({type:i,selectors:[["app-chats"]],standalone:!0,features:[h],decls:8,vars:0,consts:[[1,"mb-[16px]"],[1,"chats__navigation","mt-auto"],[1,"block","mt-[20%]"]],template:function(t,n){t&1&&(a(0,"aside"),m(1,"app-create-chat",0)(2,"app-chat-list"),a(3,"div",1),m(4,"hr")(5,"app-chat-navigation",2),c()(),a(6,"main"),m(7,"router-outlet"),c())},dependencies:[K,I,E,F],styles:["[_nghost-%COMP%]{display:flex;height:100%}[_nghost-%COMP%]   aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-right:20px;height:100%;border-right:1px solid #CCCCCC}[_nghost-%COMP%]   main[_ngcontent-%COMP%]{height:100%;width:100%;margin:0 180px}.chats__navigation[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{color:#ccc}"],changeDetection:0})}};export{V as default};
/**i18n:ed7ec225acdd9c4f0fa7847d53fc67c2e1160b32a59af7292008029acf8bcf9e*/
